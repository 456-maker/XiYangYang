<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äº’å‹•å¼æ™¯é»åœ°åœ– - å›ç¾Šç¾Šç‰§å ´</title>

    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        
        // é è¨­å°‡åˆ†æå’Œå»£å‘Šå„²å­˜ç‹€æ…‹è¨­ç‚º 'denied' (æ‹’çµ•)
        gtag('consent', 'default', {
            'ad_storage': 'denied',
            'analytics_storage': 'denied',
        });
    </script>

    <script async src="https://www.googletagmanager.com/gtag/js?id=G-GZY77FSD13"></script>
    <script>
      // ç¢ºä¿ gtag å‡½æ•¸å·²å®šç¾©
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      // GA4 è¨­å®š
      gtag('config', 'G-GZY77FSD13');
    </script>
    <style>
        /* CSS æ¨£å¼å€åŸŸ */
        
        /* å…¨åŸŸè¨­å®š */
        body {
            margin: 0;
            font-family: 'å¾®è»Ÿæ­£é»‘é«”', 'Arial', sans-serif;
            background-color: #f0f0f0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow-x: hidden; 
        }

        /* åœ°åœ–å®¹å™¨ */
        .map-container {
            width: 95%; 
            max-width: 1000px; 
            aspect-ratio: 1000 / 650; 
            
            background-image: url('https://i.meee.com.tw/skfD6bU.png'); 
            
            background-size: contain; 
            background-repeat: no-repeat;
            background-position: center;
            position: relative; 
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            overflow: hidden; 
            margin: 10px; 
        }

        /* åœ°åœ–ä¸Šçš„è¦†è“‹å±¤ï¼Œç”¨æ–¼æ”¾ç½®ç†±é» */
        .map-overlay {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
        }

        /* äº’å‹•é»ä½ (Hotspot) æ¨£å¼ */
        .hotspot {
            position: absolute;
            width: 74px;  
            height: 74px; 
            /* *** ğŸš© å·²ä¿®æ”¹ï¼šå®Œå…¨é€æ˜ï¼Œä½†ä¿ç•™å°ºå¯¸å’ŒåŠŸèƒ½ ğŸš© *** */
            background-color: transparent; 
            border: none; /* ç§»é™¤é‚Šæ¡† */
            /* ************************************** */
            border-radius: 0; 
            cursor: pointer; 
            /* ç¢ºä¿ç†±é»æ˜¯ä»¥å…¶ä¸­å¿ƒé»ç‚ºåŸºæº–é»ï¼ŒåŒæ™‚åŒ…å«æ”¾å¤§æ•ˆæœ */
            transform: translate(-50%, -50%); 
            transition: transform 0.3s ease; 
        }
        
        .hotspot:hover {
            /* æ»‘é¼ æ‡¸åœæ™‚çµ¦äºˆè¼•å¾®æ”¾å¤§ï¼Œå‘Šè¨´ç”¨æˆ¶é€™æ˜¯ä¸€å€‹å¯é»æ“Šå€åŸŸ */
            transform: translate(-50%, -50%) scale(1.05); 
        }

        /* å½ˆå‡ºé¡¯ç¤ºæ¡† (Modal) æ¨£å¼ (ä»¥ä¸‹å…§å®¹ä¿æŒä¸è®Š) */
        .modal {
            display: none; 
            position: fixed; 
            z-index: 1000; 
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto; 
            background-color: rgba(0,0,0,0.7); 
            backdrop-filter: blur(5px); 
            justify-content: center; 
            align-items: center;    
        }

        /* å°è©±æ¡†å…§å®¹å€å¡Š */
        .modal-content {
            background-color: #fefefe;
            padding: 20px; 
            border: 1px solid #888;
            width: 90%; 
            max-width: 36vw; 
            min-width: 360px; 
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.4);
            position: relative;
            animation: fadeIn 0.3s ease-out; 
            
            display: flex;
            flex-direction: column; 
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.5); }
            to { opacity: 1; transform: scale(1); }
        }

        .close-button {
            color: #aaa;
            font-size: 32px;
            font-weight: bold;
            position: absolute;
            top: 10px;
            right: 20px;
            cursor: pointer;
        }

        .close-button:hover { color: #333; }

        /* æ™¯é»å¤§æ¨™é¡Œé¡è‰²ä¿®æ­£ç‚ºæ·±ç¶ è‰² */
        #modalTitle {
            color: #006400; 
            font-size: 1.5em; 
            margin-bottom: 10px;
            padding-bottom: 5px;
            border-bottom: 3px solid #eee;
            align-self: flex-start; 
            width: 100%;
        }

        /* æ ¸å¿ƒèª¿æ•´ï¼šå…§å®¹åˆ†æ¬„å®¹å™¨ */
        .modal-body-container {
            display: flex;
            align-items: flex-start; 
            width: 100%;
        }

        /* å·¦å´åœ–ç‰‡å€å¡Š */
        .modal-left {
            flex: 1; 
            padding-right: 15px; 
            max-width: 50%; 
            display: flex; 
            flex-direction: column; 
            gap: 10px; 
        }

        /* å³å´æ–‡å­—å€å¡Š */
        .modal-right {
            flex: 1; 
            padding-left: 15px; 
            max-width: 50%; 
        }

        /* å‚ç›´åˆ†éš”ç·š */
        .vertical-line {
            width: 1px;
            background-color: #ccc; 
            height: auto; 
            min-height: 250px; 
        }

        /* åœ–ç‰‡æ¨£å¼èª¿æ•´ */
        .modal-image {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 0; 
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.15);
        }

        /* æ–‡å­—è³‡è¨Šæ¨£å¼ä¿æŒä¸è®Š */
        .info-block {
            line-height: 1.5; 
            margin-bottom: 15px;
            color: #555;
            font-size: 0.9em; 
        }
        .info-detail {
            margin-bottom: 5px; 
            display: block; 
        }
        .modal-right p {
            line-height: 1.4;
            margin-bottom: 10px;
            color: #333;
            font-size: 0.9em;
        }
        
       
        /* ğŸŒŸ åŒæ„å½ˆçª— CSS æ¨£å¼ ğŸŒŸ */
        #consent-banner {
            position: fixed; 
            bottom: 0; 
            left: 0; 
            width: 100%; 
            background: rgba(0, 0, 0, 0.85); /* æ·±è‰²èƒŒæ™¯ */
            color: white; 
            padding: 15px; 
            text-align: center; 
            z-index: 9999;
            font-size: 0.9em;
            display: none; /* é è¨­åœ¨ JS æª¢æŸ¥ Cookie å¾Œæ‰æœƒé¡¯ç¤º */
        }
        #consent-banner button {
            margin-left: 15px; 
            background: #4CAF50; /* åŒæ„æŒ‰éˆ•ç¶ è‰² */
            color: white; 
            border: none; 
            padding: 8px 15px; 
            cursor: pointer;
            border-radius: 5px;
            transition: background 0.3s;
        }
        #consent-banner button:hover {
            background: #45a049;
        }
        #consent-banner button.deny-btn {
            background: #f44336; /* æ‹’çµ•æŒ‰éˆ•ç´…è‰² */
        }
        #consent-banner button.deny-btn:hover {
            background: #da190b;
        }
        /* ğŸŒŸ åŒæ„å½ˆçª— CSS çµæŸ ğŸŒŸ */
    </style>
</head>
<body>

    <div class="map-container">
        
        <div class="map-overlay">
            
            <div class="hotspot" id="hotspot-jinshengmu" style="left: 58.25%; top: 24%;"></div>

            <div class="hotspot" id="hotspot-qiaokeli" style="left: 45.5%; top: 47.5%;"></div>

            <div class="hotspot" id="hotspot-sheep-farm" style="left: 48.5%; top: 68%;"></div>

            <div class="hotspot" id="hotspot-senlindiyuan" style="left: 20%; top: 77%;"></div>
            
        </div>
    </div>

    <div id="infoModal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h3 id="modalTitle">æ™¯é»åç¨±</h3>
            <div id="modalBody" class="modal-body-container">
                </div>
        </div>
    </div>

    <div id="consent-banner">
        æœ¬ç¶²ç«™ä½¿ç”¨ Google Analytics é€²è¡Œæµé‡åˆ†æï¼Œå¹«åŠ©æˆ‘å€‘æ”¹å–„æœå‹™ã€‚è«‹é¸æ“‡æ˜¯å¦åŒæ„æ•¸æ“šæ”¶é›†ï¼š
        <button onclick="grantConsent();">åŒæ„</button>
        <button onclick="denyConsent();" class="deny-btn">æ‹’çµ•</button>
    </div>
    <script>
        // **********************************************
        // ğŸŒŸ åŒæ„æ¨¡å¼ JavaScript é‚è¼¯ ğŸŒŸ
        // **********************************************

        // è¼”åŠ©å‡½æ•¸ï¼šéš±è—å½ˆçª—
        function hideConsentBanner() {
            const banner = document.getElementById('consent-banner');
            if (banner) {
                banner.style.display = 'none';
            }
        }
        
        // è¼”åŠ©å‡½æ•¸ï¼šè¨­å®š Cookie (æœ‰æ•ˆæœŸ 30 å¤©)
        function setCookie(name, value, days) {
            const date = new Date();
            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
            const expires = "; expires=" + date.toUTCString();
            document.cookie = name + "=" + (value || "")  + expires + "; path=/";
        }
        
        // è¼”åŠ©å‡½æ•¸ï¼šè®€å– Cookie
        function getCookie(name) {
            const nameEQ = name + "=";
            const ca = document.cookie.split(';');
            for(let i = 0; i < ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0) === ' ') c = c.substring(1, c.length);
                if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
        }

        // é»æ“Šã€ŒåŒæ„ã€æ™‚çš„è™•ç†
        function grantConsent() {
            // ç™¼é€æ›´æ–°æŒ‡ä»¤çµ¦ GA4ï¼šç”¨æˆ¶å·²åŒæ„åˆ†æå’Œå»£å‘Šå„²å­˜
            gtag('consent', 'update', {
                'ad_storage': 'granted',
                'analytics_storage': 'granted'
            });
            hideConsentBanner();
            // æœŸé™ç‚º 30 å¤©
            setCookie('consent_status', 'granted', 30);
        }

        // é»æ“Šã€Œæ‹’çµ•ã€æ™‚çš„è™•ç†
        function denyConsent() {
            // ç™¼é€æ›´æ–°æŒ‡ä»¤çµ¦ GA4ï¼šç”¨æˆ¶æ‹’çµ•åˆ†æå’Œå»£å‘Šå„²å­˜
            gtag('consent', 'update', {
                'ad_storage': 'denied',
                'analytics_storage': 'denied'
            });
            hideConsentBanner();
            // æœŸé™ç‚º 30 å¤©
            setCookie('consent_status', 'denied', 30);
        }

        // DOM å…§å®¹åŠ è¼‰å®Œæˆå¾ŒåŸ·è¡Œ
        document.addEventListener('DOMContentLoaded', function() {
            const hotspots = document.querySelectorAll('.hotspot'); 
            const modal = document.getElementById('infoModal'); 
            const closeButton = document.querySelector('.close-button'); 
            const modalTitle = document.getElementById('modalTitle'); 
            const modalBody = document.getElementById('modalBody'); 
            const banner = document.getElementById('consent-banner');
            
            // æª¢æŸ¥ç”¨æˆ¶æ˜¯å¦å·²åšéé¸æ“‡
            const consentStatus = getCookie('consent_status');
            
            if (consentStatus) {
                // å¦‚æœç”¨æˆ¶å·²ç¶“é¸æ“‡éï¼Œéš±è—å½ˆçª—
                banner.style.display = 'none'; 
                
                // æ ¹æ“š Cookie ç‹€æ…‹è¨­ç½® GA4 (è®“ GA4 é‡æ–°åˆå§‹åŒ–)
                gtag('consent', 'update', {
                    'ad_storage': consentStatus === 'granted' ? 'granted' : 'denied',
                    'analytics_storage': consentStatus === 'granted' ? 'granted' : 'denied'
                });
            } else {
                // å¦‚æœæ˜¯æ–°ç”¨æˆ¶ï¼Œé¡¯ç¤ºå½ˆçª—
                banner.style.display = 'block';
            }
            
            // --- æ™¯é»è³‡è¨Šè¨­å®š (ä¿æŒä¸è®Š) ---
            function getLeftContent(imageUrls, altText) {
                let imagesHtml = imageUrls.map(url => `<img src="${url}" alt="${altText}" class="modal-image">`).join('');
                return `<div class="modal-left">${imagesHtml}</div>`;
            }

            function getRightContent(infoBlock, description) {
                return `
                    <div class="modal-right">
                        <div class="info-block">
                            ${infoBlock}
                        </div>
                        <p>${description}</p>
                    </div>
                `;
            }

            const venueInfo = {
                // (æ™¯é»è³‡è¨Šå…§å®¹ä¿æŒä¸è®Šï¼Œç•¥)
                'hotspot-jinshengmu': {
                    title: 'è¬é‡‘è–æ¯è–æ®¿',
                    images: ['https://i.meee.com.tw/NyaDxcP.jpg'], 
                    imageAlt: 'è¬é‡‘è–æ¯è–æ®¿åœ–ç‰‡',
                    infoBlock: `<span class="info-detail">ğŸ•’ ç‡Ÿæ¥­æ™‚é–“ï¼šé€±ä¸€è‡³é€±æ—¥6:30-21:30</span><span class="info-detail">ğŸ“ åœ°å€ï¼šå±æ±ç¸£è¬å·’é„‰è¬é‡‘æ‘è¬æ–°è·¯24è™Ÿ</span><span class="info-detail">ğŸ“ é›»è©±ï¼š087832005</span>`,
                    description: 'å…¨å°æœ€å¤è€çš„å¤©ä¸»æ•™å ‚ä¹‹ä¸€ï¼Œå¤å…¸èŠåš´ã€å¯Œå«æ­·å²æ•…äº‹ã€‚è–èª•ç¯€æœŸé–“æ›´åŒ–èº«ç‚ºæµªæ¼«ç‡ˆæµ·æ‘è½ã€‚'
                },
                'hotspot-qiaokeli': {
                    title: 'å±æ±å¯å¯å·§å…‹åŠ›åœ’å€',
                    images: ['https://i.meee.com.tw/c5ElWBT.jpg'], 
                    imageAlt: 'å·§å…‹åŠ›åœ’å€åœ–ç‰‡',
                    infoBlock: `<span class="info-detail">ğŸ•’ ç‡Ÿæ¥­æ™‚é–“ï¼šé€±ä¸€é€±äºŒå…¬ä¼‘ã€é€±ä¸‰è‡³é€±æ—¥10:00-18:00</span><span class="info-detail">ğŸ“ åœ°å€ï¼šå±æ±ç¸£è¬å·’é„‰å…‰æ˜è·¯62-2è™Ÿ</span><span class="info-detail">ğŸ“ é›»è©±ï¼š087831757</span>`,
                    description: 'èµ°é€²å·§å…‹åŠ›çš„å¤¢å¹»ä¸–ç•Œï¼Œé«”é©—å¯å¯DIYã€æ‹ä¸‹ç´”ç™½æ•™å ‚ç¾ç…§ï¼Œé¦™æ°£èˆ‡ç”œå‘³äº¤ç¹”å‡ºå±æ±çš„å¹¸ç¦æ»‹å‘³ã€‚'
                },
                'hotspot-senlindiyuan': {
                    title: 'æ—å¾Œå››æ—å¹³åœ°æ£®æ—åœ’å€',
                    images: ['https://i.meee.com.tw/8UTO3FY.jpg'], 
                    imageAlt: 'æ£®æ—åœ’å€åœ–ç‰‡',
                    infoBlock: `<span class="info-detail">ğŸ•’ ç‡Ÿæ¥­æ™‚é–“ï¼šé€±ä¸€è‡³é€±æ—¥08:00â€“17:00</span><span class="info-detail">ğŸ“ åœ°å€ï¼šå±æ±ç¸£æ½®å·é®æ½®ç¾©è·¯221-1è™Ÿ</span><span class="info-detail">ğŸ“ é›»è©±ï¼š087813529</span>`,
                    description: 'ç¶ æ„ç›ç„¶ã€æ­¥é“å¹³ç·©ï¼Œæ˜¯è¦ªå­æ”¾é¬†ã€é‡é¤ç©æ°´çš„å¥½å»è™•ã€‚å…é–€ç¥¨åˆèƒ½è¦ªè¿‘å¤§è‡ªç„¶ï¼Œæ„Ÿå—æ£®æ—çš„éœè¬èˆ‡æ´»åŠ›ã€‚'
                },
                'hotspot-sheep-farm': {
                    title: 'å›ç¾Šç¾Šç‰§å ´',
                    images: ['https://i.meee.com.tw/Z1arvwd.jpg'], 
                    imageAlt: 'ç¾Šç¾Šç‰§å ´åœ–ç‰‡',
                    infoBlock: `<span class="info-detail">ğŸ•’ ç‡Ÿæ¥­æ™‚é–“ï¼šé€±ä¸€å…¬ä¼‘ã€é€±äºŒè‡³é€±äº”10:00-14:00 16:00-18:00ã€é€±å…­è‡³é€±æ—¥10:00-18:00</span><span class="info-detail">ğŸ“ åœ°å€ï¼šå±æ±ç¸£è¬å·’é„‰ä¸­èˆˆè·¯29-2è™Ÿ</span><span class="info-detail">ğŸ“ é›»è©±ï¼š087834824</span>`,
                    description: 'è¿‘è·é›¢é¤µé£Ÿã€é«”é©—ç¾Šå¥¶é¥…é ­DIYï¼Œé‚„èƒ½å“åšæ¿ƒéƒçš„ç¾Šå¥¶ç«é‹èˆ‡ç”œé»ï¼Œåœ¨æ‚ é–’ç‰§å ´è£¡æ„Ÿå—ç™‚ç™’æ™‚å…‰ã€‚'
                }
            };
            // --- æ™¯é»è³‡è¨Šè¨­å®šçµæŸ ---

            // äº’å‹•é‚è¼¯ (åŒ…å« GA4 è¿½è¹¤)
            hotspots.forEach(hotspot => {
                hotspot.addEventListener('click', function() {
                    const id = this.id; 
                    const info = venueInfo[id]; 

                    if (info) {
                        // ğŸŒŸ GA4 è‡ªè¨‚äº‹ä»¶è¿½è¹¤ï¼šè¿½è¹¤æ™¯é»é»æ“Šæ¬¡æ•¸ ğŸŒŸ
                        gtag('event', 'hotspot_click', {
                            'event_category': 'Map_Interaction',
                            'event_label': info.title, // å‚³é€æ™¯é»åç¨±
                            'venue_id': id // å‚³é€ç†±é» ID
                        });
                        // ğŸŒŸ GA4 è‡ªè¨‚äº‹ä»¶è¿½è¹¤çµæŸ ğŸŒŸ

                        modalTitle.textContent = info.title; 
                        
                        const contentHTML = 
                            getLeftContent(info.images, info.imageAlt) + 
                            '<div class="vertical-line"></div>' + 
                            getRightContent(info.infoBlock, info.description);
                            
                        modalBody.innerHTML = contentHTML;
                        modal.style.display = 'flex'; 
                    } else {
                        console.warn('æ‰¾ä¸åˆ°å°æ‡‰çš„æ™¯é»è³‡è¨Š:', id); 
                    }
                });
            });

            // é—œé–‰å½ˆå‡ºæ¡†
            closeButton.addEventListener('click', function() {
                modal.style.display = 'none'; 
            });

            // é»æ“Šå¤–éƒ¨é—œé–‰
            window.addEventListener('click', function(event) {
                if (event.target === modal) {
                    modal.style.display = 'none';
                }
            });
            
            console.info("å·²å®Œæˆ GA4 Consent Mode åŠç†±é»é»æ“Šè¿½è¹¤æ•´åˆã€‚");
        });
    </script>
</body>
</html>